/*
 * Timer16_32.c

 *
 *  Created on: 2016/02/13
 *      Author: evaota
 */
#include "Timer16_32.h"

void Timer16_0_Init(SETTIMER *CONFIG)
{
	LPC_SYSCON->SYSAHBCLKCTRL |= (1<<7);
	LPC_TMR16B0->PR = CONFIG->PR;
	if(CONFIG->MRHAND&0x01)LPC_TMR16B0->MCR |= (1<<0);
	if((CONFIG->MRHAND>>1)&0x01)LPC_TMR16B0->MCR |= (1<<3);
	if((CONFIG->MRHAND>>2)&0x01)LPC_TMR16B0->MCR |= (1<<6);
	if((CONFIG->MRHAND>>3)&0x01)LPC_TMR16B0->MCR |= (1<<9);
	LPC_TMR16B0->EMR = CONFIG->SETEMR.EMR;
	LPC_TMR16B0->MR0 = CONFIG->MR0;
	LPC_TMR16B0->MR1 = CONFIG->MR1;
	LPC_TMR16B0->MR2 = CONFIG->MR2;
	LPC_TMR16B0->MR3 = CONFIG->MR3;
	LPC_TMR16B0->CTCR = 0;
	LPC_TMR16B0->TCR = 1;//ENABLE COUNTER
	if(CONFIG->TMRHAND==1)NVIC_EnableIRQ(TIMER_16_0_IRQn);
}
void Timer16_1_Init(SETTIMER *CONFIG)
{
	LPC_SYSCON->SYSAHBCLKCTRL |= (1<<8);
	LPC_TMR16B1->PR = CONFIG->PR;
	if(CONFIG->MRHAND&0x01)LPC_TMR16B1->MCR |= (1<<0);
	if((CONFIG->MRHAND>>1)&0x01)LPC_TMR16B1->MCR |= (1<<3);
	if((CONFIG->MRHAND>>2)&0x01)LPC_TMR16B1->MCR |= (1<<6);
	if((CONFIG->MRHAND>>3)&0x01)LPC_TMR16B1->MCR |= (1<<9);
	LPC_TMR16B1->EMR = CONFIG->SETEMR.EMR;
	LPC_TMR16B1->MR0 = CONFIG->MR0;
	LPC_TMR16B1->MR1 = CONFIG->MR1;
	LPC_TMR16B1->MR2 = CONFIG->MR2;
	LPC_TMR16B1->MR3 = CONFIG->MR3;
	LPC_TMR16B1->CTCR = 0;
	LPC_TMR16B1->TCR = 1;//ENABLE COUNTER
    if(CONFIG->TMRHAND==1)NVIC_EnableIRQ(TIMER_16_1_IRQn);
}
void Timer32_0_Init(SETTIMER *CONFIG)
{
	LPC_SYSCON->SYSAHBCLKCTRL |= (1<<9);
	LPC_TMR32B0->PR = CONFIG->PR;
	if(CONFIG->MRHAND&0x01)LPC_TMR32B0->MCR |= (1<<0);
	if((CONFIG->MRHAND>>1)&0x01)LPC_TMR32B0->MCR |= (1<<3);
	if((CONFIG->MRHAND>>2)&0x01)LPC_TMR32B0->MCR |= (1<<6);
	if((CONFIG->MRHAND>>3)&0x01)LPC_TMR32B0->MCR |= (1<<9);
	LPC_TMR32B0->EMR = CONFIG->SETEMR.EMR;
	LPC_TMR32B0->MR0 = CONFIG->MR0;
	LPC_TMR32B0->MR1 = CONFIG->MR1;
	LPC_TMR32B0->MR2 = CONFIG->MR2;
	LPC_TMR32B0->MR3 = CONFIG->MR3;
	LPC_TMR32B0->CTCR = 0;
	LPC_TMR32B0->TCR = 1;//ENABLE COUNTER
	if(CONFIG->TMRHAND==1)NVIC_EnableIRQ(TIMER_32_0_IRQn);
}
void Timer32_1_Init(SETTIMER *CONFIG)
{
	LPC_SYSCON->SYSAHBCLKCTRL |= (1<<10);
	LPC_TMR32B1->PR = CONFIG->PR;
	if(CONFIG->MRHAND&0x01)LPC_TMR32B1->MCR |= (1<<0);
	if((CONFIG->MRHAND>>1)&0x01)LPC_TMR32B1->MCR |= (1<<3);
	if((CONFIG->MRHAND>>2)&0x01)LPC_TMR32B1->MCR |= (1<<6);
	if((CONFIG->MRHAND>>3)&0x01)LPC_TMR32B1->MCR |= (1<<9);
	LPC_TMR32B1->EMR = CONFIG->SETEMR.EMR;
	LPC_TMR32B1->MR0 = CONFIG->MR0;
	LPC_TMR32B1->MR1 = CONFIG->MR1;
	LPC_TMR32B1->MR2 = CONFIG->MR2;
	LPC_TMR32B1->MR3 = CONFIG->MR3;
	LPC_TMR32B1->CTCR = 0;
	LPC_TMR32B1->TCR = 1;//ENABLE COUNTER
	if(CONFIG->TMRHAND==1)NVIC_EnableIRQ(TIMER_32_1_IRQn);
}

void TIMER16_0_IRQFunc(void)
{
	if(LPC_TMR16B0->IR &(1<<0))
			LPC_TMR16B0->IR |= (1<<0);
	if(LPC_TMR16B0->IR &(1<<1))
			LPC_TMR16B0->IR |= (1<<1);
	if(LPC_TMR16B0->IR &(1<<2))
			LPC_TMR16B0->IR |= (1<<2);
	if(LPC_TMR16B0->IR &(1<<3))
			LPC_TMR16B0->IR |= (1<<3);
}
void TIMER16_1_IRQFunc(void)
{
	if(LPC_TMR16B1->IR &(1<<0))
			LPC_TMR16B1->IR |= (1<<0);
	if(LPC_TMR16B1->IR &(1<<1))
			LPC_TMR16B1->IR |= (1<<1);
	if(LPC_TMR16B1->IR &(1<<2))
			LPC_TMR16B1->IR |= (1<<2);
	if(LPC_TMR16B1->IR &(1<<3))
			LPC_TMR16B1->IR |= (1<<3);
}
void TIMER32_0_IRQFunc(void)
{
	if(LPC_TMR32B0->IR&(1<<0))
			LPC_TMR32B0->IR |= (1<<0);
	if(LPC_TMR32B0->IR &(1<<1))
			LPC_TMR32B0->IR |= (1<<1);
	if(LPC_TMR32B0->IR &(1<<2))
			LPC_TMR32B0->IR |= (1<<2);
	if(LPC_TMR32B0->IR &(1<<3))
			LPC_TMR32B0->IR |= (1<<3);
}
void TIMER32_1_IRQFunc(void)
{
	if(LPC_TMR32B1->IR &(1<<0))
			LPC_TMR32B1->IR |= (1<<0);
	if(LPC_TMR32B1->IR &(1<<1))
			LPC_TMR32B1->IR |= (1<<1);
	if(LPC_TMR32B1->IR &(1<<2))
			LPC_TMR32B1->IR |= (1<<2);
	if(LPC_TMR32B1->IR &(1<<3))
			LPC_TMR32B1->IR |= (1<<3);
}
